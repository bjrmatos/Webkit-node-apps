!function(){function e(e,t,n,o){var l=document.createElement("div");l.className="custom-modal-overlay";var i=document.createElement("div");i.className="custom-modal custom-modal-prompt",i.innerHTML='<div class="custom-modal-header">'+e+'</div><div class="custom-modal-content"></div><div class="custom-modal-action"></div>';var a=function(e){l.parentNode.removeChild(l),i.parentNode.removeChild(i),"function"==typeof o&&o(e)},c=document.createElement("input");c.type="text",c.value=t,c.onkeyup=function(e){n?13==e.keyCode&&""!==this.value&&this.value!==t&&a(this.value):13==e.keyCode&&a(this.value==t?"":this.value)};var r=document.createElement("button");r.innerHTML="OK",r.onclick=function(){n?""!==c.value&&c.value!==t&&a(c.value):a(c.value==t?"":c.value)};var u=document.createElement("button");u.innerHTML="Cancel",u.onclick=function(){l.parentNode.removeChild(l),i.parentNode.removeChild(i)},document.body.appendChild(l),document.body.appendChild(i),i.children[1].appendChild(c),i.children[2].appendChild(r),i.children[2].appendChild(u),c.select()}function t(e){var t=e.hash.replace("#","");a[t]&&(e.onclick=function(){return a[t](),!1})}function n(e){if(i.selection().value.length>0)i.wrap("<"+e+">","</"+e+">");else{var t="<"+e+">Heading "+e.substr(1)+"</"+e+">";i.insert(t,function(){var e=i.selection().start;i.select(e-t.length+4,e-5)})}}String.prototype.capitalize=function(e){return(e?this.toLowerCase():this).replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})};for(var o=document.getElementById("editor-area"),l=document.getElementById("editor-control").getElementsByTagName("a"),i=new Editor(o),a={bold:function(){i.wrap("<strong>","</strong>")},italic:function(){i.wrap("<em>","</em>")},code:function(){i.wrap("<pre>","</pre>")},quote:function(){i.wrap("<blockquote>","</blockquote>")},li:function(){i.wrap("  <li>","</li>")},"ul-list":function(){var e=i.selection();if(e.value.length>0)i.insert("<ul>\n  <li>"+e.value.replace(/\n/g,"</li>\n  <li>")+"</li>\n</ul>");else{var t="<ul>\n  <li>List Item</li>\n</ul>";i.indent(t,function(){i.select(e.start+11,e.start+t.length-11)})}},"ol-list":function(){var e=i.selection();if(e.value.length>0)i.insert("<ol>\n  <li>"+e.value.replace(/\n/g,"</li>\n  <li>")+"</li>\n</ol>");else{var t="<ol>\n  <li>List Item</li>\n</ol>";i.indent(t,function(){i.select(e.start+11,e.start+t.length-11)})}},h1:function(){n("h1")},h2:function(){n("h2")},h3:function(){n("h3")},h4:function(){n("h4")},h5:function(){n("h5")},h6:function(){n("h6")},hr:function(){i.insert("\n<hr>\n")},p:function(){i.wrap("<p>","</p>\n")},undo:function(){i.undo()},redo:function(){i.redo()},select:function(){i.select(0,o.value.length)},link:function(){var t=(i.selection(),null),n=null;e("Link title:","Link title goes here...",!1,function(o){t=o,e("URL:","http://",!0,function(e){n=e,i.insert('\n<a href="'+e+'" title=" '+t+'">'+t+"</a>\n")})})},image:function(){e("Image URL:","http://",!0,function(e){var t=e.substring(e.lastIndexOf("/")+1,e.lastIndexOf(".")).replace(/[\-\_\+]+/g," ").capitalize();t=t.indexOf("/")<0?decodeURIComponent(t):"Image",i.insert('\n<img src="'+e+'" alt=" '+t+'"/>\n')})}},c=0,r=l.length;r>c;++c)t(l[c]),l[c].href="#";var u=0;i.area.onkeydown=function(e){return 5>u?u++:(i.updateHistory(),u=0),e.shiftKey&&9==e.keyCode?(i.outdent("    "),!1):e.shiftKey&&13==e.keyCode?(i.insert("<br>\n"),!1):e.ctrlKey&&13==e.keyCode?(i.wrap((this.value.length>0?"\n":"")+"<p>","</p>"),!1):9==e.keyCode?(i.indent("    "),!1):void 0};var d=new Showdown.converter,h=document.querySelector("#eye"),v=document.querySelector("#editor-area"),m=document.querySelector(".result");if(s=document.querySelector("#state"),h.onclick=function(){m.innerHTML=d.makeHtml(v.value),m.classList.toggle("show"),v.classList.toggle("hide"),this.classList.toggle("active")},null!==localStorage){v.value=localStorage.getItem("html_text_saved"),s.textContent="Loaded";{setInterval(function(){localStorage.setItem("html_text_saved",v.value),s.textContent="Save";var e=setTimeout(function(){s.textContent=" ",clearTimeout(e)},1e3)},1e4)}}}();
